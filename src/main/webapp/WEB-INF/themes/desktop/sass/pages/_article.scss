//  use "// TEMP-PROD:" for temporary styles to match production until all tabs are re-styled
$temp-pad-tabs: rem-calc(8) rem-calc(9);
// TEMP-PROD: remove this line. set padding: $pad-small; for  article-tab >tab-title > a

// extensible layout styles

.text-article-intro {
  font-size: $txt-size-default;
  color: $grey-med;

  a {
    @include link-text($decoration: underline, $color: $grey-med);
  }
}

// layout elements
.set-grid {
  @extend .plos-row;
}

.article-body {
  @include plos-grid-column(755, $gutter: none);
}

.article-aside {
  @include plos-grid-column(180, $gutter: none);
  float: right; /* temporary */
  margin-left: $pad-default; /* temporary */
}

.title-block {
  width: 100%;
  background: $white;
  padding-left: $pad-small;

}

.classifications {
  @include plos-grid-column(600, $gutter: none);
  @extend %txt-transform;
  margin-top: $pad-smallish;

  > p {
    font-size: $txt-size-xxxsmall;
    display: inline-block;
    padding-left: $pad-smallish;
    line-height: $txt-size-large;
  }

  .license-short {
    background: image-url('icon.oa.gif') no-repeat 0 3px;
    padding-right: $pad-small;
    font-family: $font-face-fancy;
  }

  .peer-reviewed {
    background: image-url('icon.pr.gif') no-repeat 0 3px;
    font-family: $font-face-fancy;
  }

  .type-concern-retraction {
    color: $clr-warning;

    &:before {
      @extend .icon-alert;
      font-size: rem-calc(15);
      margin-right: 3px;
      line-height: rem-calc(15);
    }
  }

  .type-correction {
    &::before {
      content: '';
      @extend .icon-correction;
    }

  }

  .article-type {
    margin-top: $pad-xsmall;

    > p {
      vertical-align: bottom;
      line-height: $txt-size-xxxsmall;
      font-size: $txt-size-xxxsmall;
    }
  }
}

.signposts {
  //TEMPORARY STYLES
  @include plos-grid-column(360, $gutter: none);
  @extend .inline-list;
  margin: 0;
  float: right;
  text-align: center;
  height: 60px;

  li {
    float: right;
    border-right: 1px solid $grey-med-light;
    border-left: 1px solid $grey-med-light;
    padding: $pad-small $pad-default;
    margin: 0;
    font-weight: bold;
  }
}

.article-title-etc {
  @include plos-grid-column(900, $gutter: none);
  margin-top: $pad-small;
  h1 {
    font-size: $txt-size-27large; // TEMP-PROD: needs to be 26px or 28px
    line-height: normal;

    i, italic, named-content {
      font-style: italic;
    }
  }
  .date-doi {
    @include clearfix();
    @extend .text-article-intro;
    margin: 0;
    margin-bottom: ($pad-default + $pad-xsmall);

    li {
      float: left;
      margin: 0 $pad-small;

      &:first-child {
        margin: 0 $pad-small 0 0;
        padding-left: 0;
        list-style-type: none;
      }
    }
  }
}

.float-title {
  position: fixed;
  left: 0;
  visibility: hidden;
  top: -100px;
  width: 100%;
  height: rem-calc(49);
  padding: rem-calc(7 $pad-small); // TEMP-PROD: normalize 7 to $pad-small;
  border-bottom: 1px solid $grey-med-light;
  background-color: $white;
  z-index: map-get($zindex, titleTopFixed);

  #floatAuthorList {
    height: rem-calc(16);
    width: rem-calc(760);
    @extend .inline-list;
    margin: 0;
    padding-left: 0;

    li {
      margin-left: 0;
      line-height: 16px;
      font-size: rem-calc($txt-size-xsmall);
    }

  }
}

.topVisible {
  visibility: visible;
  top: 0;
  transition-property: top;
  transition-duration: .6s;
  transition-timing-function: cubic-bezier(0, 1, 0.5, 1);
  overflow: hidden;
  box-sizing: border-box;
  z-index: map-get($zindex, topVisible);
  .float-title-inner {
    @include plos-grid-column(760, $gutter: left, $gutter-width: 18px);

    h1 {
      @include truncated();
      font-size: $txt-size-medium;
      font-weight: bold;
      font-family: $font-face-plain;
      line-height: rem-calc(16);
      margin: rem-calc(2) 0; //TEMP-PROD: change this
      i, italic, named-content {
        font-style: italic;
      }
    }

  }

  .logo-close {
    @include plos-grid-column(160, $gutter: none);
    padding: 0 $pad-small $pad-xsmall 0;
    display: block;
    float: right;
    text-align: right;
    cursor: pointer;

    img {
      margin-right: $pad-smallish;
    }

    .close-floater {
      @extend .closer-brand;
    }
  }
}

// TABS

.article-tabs {
  display: table;
  table-layout: fixed;
  margin-bottom: $pad-default;
  width: 100%;
  margin-left: 0;

  .tab-title {
    margin-left: 0;
    display: table-cell;
    float: none;
    position: static;

    a.article-tab-1 {
      background: $tabs-base-color;
    }
    a.article-tab-2 {
      background: lighten($tabs-base-color, 10%);
    }
    a.article-tab-3 {
      background: lighten($tabs-base-color, 20%);
    }
    a.article-tab-4 {
      background: lighten($tabs-base-color, 30%);
    }
    a.article-tab-5 {
      background: lighten($tabs-base-color, 40%);
    }

    a {
      display: block;
      height: 75px;
      padding: $temp-pad-tabs; // TEMP-PROD: use $pad-small;
      border-right: 1px solid $white;
      font-weight: bold;
      color: $white;
      &:hover {
        background: $plos-default;
        color: $white;
      }
    }
    &.active a {
      position: relative;
      @extend %brand-background;
      height: 83px;
      font-weight: bold;
      font-family: $font-face-plain;
      background-image: image-url("icon.tabs.active.white.png");
      background-repeat: no-repeat;
      background-position: 9px 65px;

      &:hover {
        @extend %brand-background;
        cursor: inherit;
      }
    }
  }
}

.author-list {
  @extend .text-article-intro;
  @extend .inline-list;
  overflow: visible;
  margin-left: 0; // needed t overwrite the inline-list
  margin-bottom: $pad-small;

  li {
    position: relative;
    margin-left: -($pad-highlight * 1.5); // needed to overwrite the inline-list

    &.active {

      a:hover {
        text-decoration: none;
      }
    }

    &[data-js-toggle='toggle_trigger'] a {
      color: $clr-highlight;
    }

    > a {
      display: inline-block; // needed to overwrite the inline-list
      padding: $pad-highlight $pad-highlight-x; //TODO line-height;
    }
  }

  .contribute {
    @extend .icon-author-contribute;
  }

  .rel-footnote {
    @extend .icon-author-footnotes;
  }

  .email {
    @extend .icon-author-address;
  }
}

.author-info {
  @extend .pill-small;
  padding-right: ($pad-default);
  width: rem-calc(450);
  top: rem-calc($txt-size-default + 2); // need to make this a tad more dynamic.
  height: auto;
  position: absolute;
  margin-top: $pad-small;
  opacity: 0;
  @include single-transition(opacity);
  z-index: -1;

  p {
    border-top: rem-calc(2) solid $grey-med;
    padding: $pad-small 0;
    &:first-child {
      border-top: none;
    }
  }

  .email, .rel-footnote {
    @include icon-offscreen;
    margin-right: $icon-space;
  }
}

.active {
  a, a:hover {
    color: $white;
  }

  .author-name {
    @include rounded-pill($padding: $pad-highlight $pad-highlight-x, $hover: false);
  }

  .author-info {
    opacity: 1;
    z-index: map-get($zindex, dropdown);
  }

  .close {

    @extend .closer;
    position: absolute;
    top: $pad-xsmall;
    right: $pad-xsmall;
  }
}

.article-type {
  height: auto;
  width: auto;
  display: table;
  @include js-tooltip-container();
}

.type-desc {
  @include tooltip();
  @include js-tooltip-target($top: rem-calc(35));

  p {
    color: $clr-tooltip-text;
    text-transform: none;

    a {
      @extend %link-text-white;
    }
  }
}

.article-type-tooltip {
  @include tooltip-trigger($outside-box: yes);
  font-family: $font-face-plain;
  font-size: $txt-size-xxxsmall;

}

//RIGHT COLUMN STYLES. MIGHT SHOULD BE IN A SEPARATE FILE

.dload-menu {
  width: rem-calc(160);

  div {
    display: inline;
    float: left;
    line-height: rem-calc(35);
    font-size: $txt-size-mediumish;
    font-weight: bold;
    color: $white;

    &:hover {
      background: $plos-default;
    }
  }

  .dload-pdf {
    @include rounded-pill($background: $clr-body-text, $padding: rem-calc(0 11), $border-radius: 5px 0 0 5px, $hover: false);

    &:hover {
      background: $plos-default;
    }

    a {
      color: $white;
    }
  }

  .dload-hover {
    @include rounded-pill($background: $clr-body-text, $padding: rem-calc(0 8 0 11), $border-radius: 0 5px 5px 0, $hover: false);
    @include js-tooltip-container();
    @extend .icon-caret-down;

    &:hover {
      cursor: pointer;
      background: $plos-default;;
    }
  }

  .shim {
    height: rem-calc(10);
    display: block;
    position: absolute;

    &:hover {
      background: transparent !important;
    }
  }
}

.dload-xml {
  @extend .tooltip-aside;
  @include js-tooltip-target($top: rem-calc(40));
  opacity: 1;
  z-index: map-get($zindex, dropdown);
  left: -127px;
  cursor: default;

  a {
    //firefox
    font-family: $font-face-plain;
  }
}

.print-article {
  @extend .button-big;
  @include js-tooltip-container;
  @include plos-grid-column(77, $gutter: right, $gutter-width: 5px);
  margin-top: $pad-xsmall;
  cursor: pointer;
}

.print-options {
  @extend .tooltip-aside;
  @include js-tooltip-target($top: rem-calc(40));
  opacity: 1;
  z-index: map-get($zindex, dropdown);
}

.aside-container {
  @include clearfix();
  width: rem-calc(160);
  margin-bottom: $pad-default;
}

.share-article {
  @extend .button-big;
  @include js-tooltip-container;
  @include plos-grid-column(77, $gutter: none);
  margin-top: $pad-xsmall;
  cursor: pointer;
}

.share-options {
  @extend .tooltip-aside;
  @include js-tooltip-target($top: rem-calc(40));
  padding-left: $pad-small;
  opacity: 1;
  z-index: map-get($zindex, dropdown);
  left: -82px;
  list-style-type: none;

  li {
    list-style-position: outside; // firefox
    list-style-type: none;

    a img {
      width: 16px;
      height: 16px;
      margin-right: rem-calc(3);
      margin-bottom: rem-calc(4);
    }
  }
}

.crossmark-container {
  @extend .aside-container;
  margin-bottom: $pad-xsmall;
  img {
    padding: $pad-small 0;
    display: block;
  }
}

.article #crossmark-tooltip-130 {
  z-index: map-get($zindex, crossmark-tooltip);
}

// overrides for crossmark's jquery ui
.article .crossmark-ui-dialog .ui-dialog-titlebar-close {
  &:focus {
    outline: none;
  }
}

// overrides for crossmark's jquery ui
body.article .ui-widget-overlay {
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  height: 100%;
  background: transparent url(http://crossmark.crossref.org/images/bg_overlay.png) top left repeat;
  opacity: .3;
  filter: Alpha(Opacity - 30);
}

.related-articles-container {
  @extend .aside-container;

  h3 {
    font-size: $txt-size-medium; //$txt-size-h3;
    font-family: $font-face-plain;
    font-weight: bold;
    line-height: rem-calc(17); // TEMP PROD: use 18px;
    border-bottom: 1px solid #dedede;
    padding-bottom: $pad-small;
    margin-bottom: rem-calc(8); // TEMP PROD: use 10px;
  }

  ul {
    list-style: none;
    margin-left: 0;

    li {
      margin-bottom: rem-calc(12); // TEMP PROD: use 10 or 15;

      a {
        @include link-text($color: $plos-default, $decoration: underline);
        font-size: $txt-size-xsmall;
      }
    }
  }

}

.skyscraper-container {
  @extend .aside-container;
  .title {
    @extend .header-allcaps-smallest;
    margin-bottom: $pad-xsmall;
    text-align: center;
    color: $grey-tinytext; // TEMP PROD: change to grey-med-light
  }
}