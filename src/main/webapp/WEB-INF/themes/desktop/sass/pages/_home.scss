/*
 *    Home page blocks
 */

$block-height: rem-calc(250);
$block-height-small: rem-calc(180);
$pad-default: rem-calc(10);
$image-width: rem-calc(70);
$hero-height: rem-calc(380);
$image-container: ($image-width + $pad-default);

// for demo:

.row {
  &.one, &.two {
    .block {
      margin-right: 2%; // this is for demo
      &:last-child {
        margin-right: 0;
      }
    }
  }
}

.row {
  @include grid-row()
}

//home page blocks

.hero
.overlay-light {

}

.hero {
  position: relative;
  padding: 0;
  margin-bottom: rem-calc(20);
  background: transparent;
  // overlay colors
  &.overlay-dark > a:before {
    @extend .overlay;
    @include filter-gradient(#00ffff, #a80000, vertical); // IE6-8
    $experimental-support-for-svg: true;
    @include background-image(linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0) 45%, rgba(250, 250, 250, 0) 46%, rgba(231, 231, 231, 0.06) 50%, rgba(203, 203, 203, 0.17) 56%, rgba(134, 134, 134, 0.54) 71%, rgba(102, 102, 102, 0.65) 78%, rgba(0, 0, 0, 0.66) 100%));
  }
  &.overlay-light > a:before {
    @extend .overlay;
    @include filter-gradient(#00ffff, #a8ffff, vertical); // IE6-8
    $experimental-support-for-svg: true;
    @include background-image(linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0) 46%, rgba(255, 255, 255, 0.06) 50%, rgba(255, 255, 255, 0.17) 56%, rgba(255, 255, 255, 0.54) 71%, rgba(255, 255, 255, 0.65) 78%, rgba(255, 255, 255, 0.66) 100%));
  }
  img {
    @include single-box-shadow();
    @include border-top-radius();
    width: 100%;
  }
  // hero colors: default is white text
  color: $white;
  a {
    color: $white;
  }
  &.dark-text,
  &.dark-text a {
    color: $clr-body-text;
  }

  // hero text
  .hero-content {
    position: absolute;
    width: 100%;
    bottom: 0;
    padding: $pad-default;
    font-size: rem-calc($txt-size-medium-large);
    h4 {
      @extend h1;
      @extend .no-margin;
    }
    p {
      @extend .no-margin;
    }
  }
}

#billboard {
  @include grid-row;
  @include blocks($grey-dark);
  h3, h4, a {
    color: $white !important;
  }
  position: relative;
  a {
    @include rounded-pill();
    position: absolute;
    width: 80px;
    height: 36px;
    right: 20px;
    top: 10px;
  }
}

//sizes:
.row > .block {
  &.x-small {
    @include grid-column(2, $collapse: false);

  }
  &.small {
    @include grid-column(4, $collapse: false);
  }
  &.medium {
    @include grid-column(6, $collapse: false);
    width: 48%; // for demo
  }
  &.large {
    @include grid-column(7, $collapse: false);
  }

}

.block {
  position: relative;
  height: $block-height;

  @include blocks;

  .block-image {
    width: $image-container;
    display: block;
    position: absolute;
    left: $pad-default;
    top: $pad-default;
  }
  &.image .block-content {
    margin-left: ($image-container + ($pad-default * 2));
  }
  // components
  .date {
    @extend .small-italic;
  }
  .credits {
    @extend .small-italic;
    position: absolute;
    bottom: $pad-default;
    left: ($image-container + ($pad-default * 3));
    margin: 0;

  }
  .category {
    @extend .highlighted-title;
  }
  .title {
    @extend h2;
    a {
      color: $clr-body-text;
      &:hover {
        text-decoration: underline;
      }
    }

  }
  .blurb {
    //TODO: remove when you neaten up font sizes.
  }

  .block-content {
    position: relative;
    font-size: rem-calc($txt-size-default);
  }

  &.small {
    .title {
      @extend h4;
      @extend .subheader;
      font-family: albert-bold;
    }
  }

}

.column {
  &.left {
    @include grid-column(8, $collapse: false);
    .row-small-blocks {
      @include block-grid(2);
      // for demo
      .block {
        &:nth-child(1), &:nth-child(3) {
          margin-right: 2%;
          width: 46%;
        }
      }

    }
    /// row three is shorter than the others
    .block {
      height: $block-height-small;

      .block-image {
        height: ($block-height-small - ($pad-default *2));
        overflow: hidden;
      }

      &.small {
        @include grid-column(6, $collapse: false);
      }
    }
  }

  &.right {
    @include grid-column(4, $collapse: true);
  }
}

#submission-links,
#spotlight,
#twitter-feed,
#blogroll {
  @include blocks();
  @include stub();
  height: $block-height;
}

#billboard {
  @include grid-row;
  @include blocks($grey-dark);
  h3, h4, a {
    color: $white !important;
  }
  position: relative;
  a {
    @include rounded-pill();
    position: absolute;
    width: 80px;
    height: 36px;
    right: 20px;
    top: 10px;
  }
}
#social-links {

  @include blocks;
 // @include grid-column(4);
  //width: 300px;
  background: #04417d;
  border-radius: $border-radius-default;

  h5 {
    @extend .header-xlarge-light;
    text-indent: 10px;
    margin-bottom: 10px;
  }
  .social-media {
    @extend .inline-list;
    margin-bottom: 0;
    margin-left: -7px;
    li {
      margin-left: 4px;
      margin-bottom: 0;
    }
    li a {
      background: $plos-default;
      border-radius: $border-radius-default;
      display: inline-block;
      height: 44px;
      min-width: 44px;
      line-height: 44px;
      padding: 0;
      text-align: center;
      vertical-align: top;
      font-size: 22px;
      color: white;

      &:hover {
        background: $grey-dark;
      }
    }
    .social-email {
      @extend .icon-email;
    }
    .social-rss {
      @extend .icon-rss;
    }
    .social-twitter {
      @extend .icon-twitter;
    }
    .social-fb {
      @extend .icon-facebook;
    }
    .social-join {
      width: 100px;
      font-size: rem-calc($txt-size-medium-large);
    }
  }

}
#article-list {
  height: $block-height;
  @include blocks;
  @include grid-column(4);

  position: relative;
  width: 30%; // TODO: fix grid
  margin-right: 3%; // TODO: fix grid

  h3 {
    @extend .highlighted-title;
  }

  ul.list-plain {
    @extend .no-bullet; // from foundation
    line-height: normal;

    li {
      color: $clr-body-text;
      margin-bottom: 15px;

      a {
        @include link-text();
        display: block;
        font-family: $font-face-fancy;
        font-size: rem-calc($txt-size-xsmall);
      }
    }
  }
  .more-link {
    position: absolute;
    bottom: 10px;
    left: 10px;
    right: auto;
    > a {
      @include link-text();
      @extend .header-allcaps-plain;
    }
    &:after {
      @extend .more-icon;
    }
  }

  .truncated-tooltip {
    @extend .has-tip; //foundation
  }
}
//Tooltips are added to the bottom of the page & hidden. This class should not be nested.
.tooltip {
  width: 300px !important;
  @include single-box-shadow();
  border: 1px solid $grey-med-light;
}

#issue {
  height: $block-height;
    @include grid-column(2);
    @include blocks;

    .current-img {
      width: rem-calc(160);
    }
    .boxtitle {
      margin-top: rem-calc(5);
      a {
        @include link-text();
        @extend .header-allcaps-xlarge;
        @extend .condense;
        display: block;
        margin-bottom: rem-calc(-5);
        font-weight: 900;
      }
      .subhead {
        font-face: $font-face-plain;
        font-size: rem-calc($txt-size-medium-large);
      }
    }
}

.linkbox {
  @extend .block-card;
  height: rem-calc(410); // PG-we have to set this height to be standard so that we know how tall to make the twitter feed.
  ul {
    @extend .no-bullet; // from foundation
    li {
      //padding: $pad-default $pad-medium;
      border-top: 1px solid $grey-light;
      @extend .link-text-body;
      a {
        font-family: $font-face-fancy;
        font-size: $txt-size-medium-large;

      }
    }
  }

}